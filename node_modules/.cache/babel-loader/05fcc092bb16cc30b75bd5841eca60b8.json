{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sergey\\\\Desktop\\\\Messenger\\\\src\\\\hooks\\\\useAuth.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { useState, useEffect, useContext, createContext } from 'react';\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from 'firebase/auth';\nimport { auth } from '../firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport function AuthProvider(_ref) {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const authData = useProvideAuth();\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: authData,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 10\n  }, this);\n}\n\n_s(AuthProvider, \"cscIlfKsRMD8Yvphp0atcYvNBW4=\", false, function () {\n  return [useProvideAuth];\n});\n\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n\n  return useContext(AuthContext);\n};\n\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nfunction useProvideAuth() {\n  _s3();\n\n  const [user, setUser] = useState(null);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  function signin(email, password) {\n    setLoading(true);\n    signInWithEmailAndPassword(auth, email, password).then(userCredential => {\n      console.log('signIn userCredential >>>', userCredential);\n      setUser(userCredential.user);\n      setError(false);\n    }).catch(error => {\n      console.warn('signIn error >>>', error);\n      setError({\n        code: error.code,\n        message: error.message\n      });\n      setUser(false);\n    }).finally(() => setLoading(false));\n  }\n\n  function signup(email, password) {\n    setLoading(true);\n    createUserWithEmailAndPassword(auth, email, password).then(userCredential => {\n      console.log('signUp userCredential >>>', userCredential);\n      setUser(userCredential.user);\n      setError(false);\n    }).catch(error => {\n      console.warn('signUp error >>>', error);\n      setError({\n        code: error.code,\n        message: error.message\n      });\n      setUser(false);\n    }).finally(() => setLoading(false));\n  }\n\n  function signout() {\n    setLoading(true);\n    signOut(auth).then(() => {\n      console.log('signOut success >>>', true);\n      setUser(false);\n      setError(false);\n    }).catch(error => {\n      console.warn('signOut error >>>', error);\n      setError({\n        code: error.code,\n        message: error.message\n      });\n    }).finally(() => setLoading(false));\n  }\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, user => {\n      if (loading) {\n        setLoading(false);\n      }\n\n      if (user) {\n        console.log('AuthStateChanged >>>', true);\n        setUser(user);\n      } else {\n        console.log('AuthStateChanged >>>', false);\n        setUser(false);\n      }\n    });\n    return () => unsubscribe();\n  }, []);\n  return {\n    user,\n    error,\n    loading,\n    signin,\n    signup,\n    signout\n  };\n}\n\n_s3(useProvideAuth, \"mbwYWoXPLRnr8gghrHOsXvKzvQ0=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["C:/Users/Sergey/Desktop/Messenger/src/hooks/useAuth.js"],"names":["useState","useEffect","useContext","createContext","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","onAuthStateChanged","auth","AuthContext","AuthProvider","children","authData","useProvideAuth","useAuth","user","setUser","error","setError","loading","setLoading","signin","email","password","then","userCredential","console","log","catch","warn","code","message","finally","signup","signout","unsubscribe"],"mappings":"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","sourcesContent":["import { useState, useEffect, useContext, createContext } from 'react';\r\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from 'firebase/auth';\r\nimport { auth } from '../firebase';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function AuthProvider({ children }) {\r\n  const authData = useProvideAuth();\r\n  return <AuthContext.Provider value={authData}>{children}</AuthContext.Provider>;\r\n}\r\n\r\nexport const useAuth = () => {\r\n  return useContext(AuthContext);\r\n};\r\n\r\nfunction useProvideAuth() {\r\n  const [user, setUser] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  function signin(email, password) {\r\n    setLoading(true);\r\n    signInWithEmailAndPassword(auth, email, password)\r\n      .then((userCredential) => {\r\n        console.log('signIn userCredential >>>', userCredential);\r\n        setUser(userCredential.user);\r\n        setError(false);\r\n      })\r\n      .catch((error) => {\r\n        console.warn('signIn error >>>', error);\r\n        setError({ code: error.code, message: error.message });\r\n        setUser(false);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }\r\n  function signup(email, password) {\r\n    setLoading(true);\r\n    createUserWithEmailAndPassword(auth, email, password)\r\n      .then((userCredential) => {\r\n        console.log('signUp userCredential >>>', userCredential);\r\n        setUser(userCredential.user);\r\n        setError(false);\r\n      })\r\n      .catch((error) => {\r\n        console.warn('signUp error >>>', error);\r\n        setError({ code: error.code, message: error.message });\r\n        setUser(false);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }\r\n  function signout() {\r\n    setLoading(true);\r\n    signOut(auth)\r\n      .then(() => {\r\n        console.log('signOut success >>>', true);\r\n        setUser(false);\r\n        setError(false);\r\n      })\r\n      .catch((error) => {\r\n        console.warn('signOut error >>>', error);\r\n        setError({ code: error.code, message: error.message });\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n      if (loading) {\r\n        setLoading(false);\r\n      }\r\n      if (user) {\r\n        console.log('AuthStateChanged >>>', true);\r\n        setUser(user);\r\n      } else {\r\n        console.log('AuthStateChanged >>>', false);\r\n        setUser(false);\r\n      }\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  return {\r\n    user,\r\n    error,\r\n    loading,\r\n    signin,\r\n    signup,\r\n    signout,\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}